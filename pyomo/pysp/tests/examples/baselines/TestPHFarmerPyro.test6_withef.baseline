*** Pyro Name Server ***
Name server listening on: ('0.0.0.0', 9090)
Broadcast server listening on: ('0.0.0.0', 9090)
URI is: PYRO://10.0.0.253:9090/0a0000fd268d20b9bff7b28164d427ca6b
URI written to: /Users/ghackebeil/Projects/coopr/src/coopr.pysp/coopr/pysp/tests/examples/Pyro_NS_URI
Name Server started.
User-defined PH extension module=coopr.pysp.plugins.phhistoryextension already imported - skipping
Dispatcher is ready.
Attempting to find Pyro dispatcher object...
Dispatcher Object URI:PYRO://10.0.0.253:7766/0a0000fd268e20b9bff8d4c74b03d9b3ec
This is worker Worker_9871@Ozymandias.local
Listening for work from dispatcher...
Attempting to find Pyro dispatcher object...
Dispatcher Object URI: PYRO://10.0.0.253:7766/0a0000fd268e20b9bff8d4c74b03d9b3ec
This is client 9872@Ozymandias.local
Initializing PH

WW PH Extension: Loading user-specified configuration from file=/Users/ghackebeil/Projects/coopr/src/coopr.pysp/examples/pysp/farmer/config/wwph.cfg
WW PH Extension: Loading variable suffixes from file=/Users/ghackebeil/Projects/coopr/src/coopr.pysp/examples/pysp/farmer/config/wwph.suffixes
User-defined PH solution writer module=coopr.pysp.plugins.jsonsolutionwriter already imported - skipping
Starting PH

Initiating PH iteration=0
2014-07-16 16:26:35.855273: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpEvlUqS.tmp0nSijf.pyomo.lp
2014-07-16 16:26:35.867533: Solve completed - number of solutions=1
2014-07-16 16:26:35.880032: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpt9rOFY.tmpb9e6Le.pyomo.lp
2014-07-16 16:26:35.891041: Solve completed - number of solutions=1
2014-07-16 16:26:35.904496: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmp7iBBn0.tmp97kMik.pyomo.lp
2014-07-16 16:26:35.916304: Solve completed - number of solutions=1
Sub-problem solve time statistics - Min: 0.00 Avg: 0.00 Max: 0.00 (seconds)
Number of discrete variables fixed=0 (total=0)
Number of continuous variables fixed=0 (total=3)
Convergence metric=      0.2540  First stage cost avg= 113494.4444  Max-Min=10416.67
Cumulative run-time=0.15 seconds

Initiating PH iteration=1
WW PH Extension: Setting mipgap to 0.1000000, as specified in the configuration file
2014-07-16 16:26:35.929298: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpWTUTqk.tmpHvOGro.pyomo.lp
2014-07-16 16:26:35.944748: Solve completed - number of solutions=1
2014-07-16 16:26:35.957159: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmp7KMBf7.tmpZ8kuMb.pyomo.lp
2014-07-16 16:26:35.971274: Solve completed - number of solutions=1
2014-07-16 16:26:35.983786: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpmEpC9X.tmpn9B0U9.pyomo.lp
2014-07-16 16:26:35.997828: Solve completed - number of solutions=1
Sub-problem solve time statistics - Min: 0.00 Avg: 0.00 Max: 0.00 (seconds)
Number of discrete variables fixed=0 (total=0)
Number of continuous variables fixed=0 (total=3)
Convergence metric=      0.1259  First stage cost avg= 113107.2221  Max-Min= 6943.89
Cumulative run-time=0.23 seconds

Initiating PH iteration=2
WW PH Extension: Setting mipgap to 0.0500717, based on current value of the convergence metric
2014-07-16 16:26:36.010496: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpztIdn0.tmpOPKseF.pyomo.lp
2014-07-16 16:26:36.025856: Solve completed - number of solutions=1
2014-07-16 16:26:36.038363: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpYLtc8i.tmpaoMLMX.pyomo.lp
2014-07-16 16:26:36.051931: Solve completed - number of solutions=1
2014-07-16 16:26:36.064687: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpJTkdCO.tmpGjVQZl.pyomo.lp
2014-07-16 16:26:36.078445: Solve completed - number of solutions=1
Sub-problem solve time statistics - Min: 0.00 Avg: 0.00 Max: 0.00 (seconds)
Number of discrete variables fixed=0 (total=0)
Number of continuous variables fixed=0 (total=3)
Convergence metric=      0.0816  First stage cost avg= 112954.6296  Max-Min= 2234.82
Cumulative run-time=0.31 seconds

Initiating PH iteration=3
WW PH Extension: Setting mipgap to 0.0327607, based on current value of the convergence metric
2014-07-16 16:26:36.092118: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmp0nPKKJ.tmpbPikPT.pyomo.lp
2014-07-16 16:26:36.106252: Solve completed - number of solutions=1
2014-07-16 16:26:36.118713: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmp9Bg7E_.tmp0tUUOE.pyomo.lp
2014-07-16 16:26:36.132350: Solve completed - number of solutions=1
2014-07-16 16:26:36.145917: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpm4hhC5.tmpcsR9tH.pyomo.lp
2014-07-16 16:26:36.159193: Solve completed - number of solutions=1
Sub-problem solve time statistics - Min: 0.00 Avg: 0.00 Max: 0.00 (seconds)
Number of discrete variables fixed=0 (total=0)
Number of continuous variables fixed=0 (total=3)
Convergence metric=      0.0796  First stage cost avg= 112963.0248  Max-Min= 2375.31
Cumulative run-time=0.39 seconds

Initiating PH iteration=4
WW PH Extension: Setting mipgap to 0.0319973, based on current value of the convergence metric
2014-07-16 16:26:36.172400: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpXn3hvn.tmpORd7RZ.pyomo.lp
2014-07-16 16:26:36.187631: Solve completed - number of solutions=1
2014-07-16 16:26:36.200266: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpMF9h9X.tmpCWzFgf.pyomo.lp
2014-07-16 16:26:36.214132: Solve completed - number of solutions=1
2014-07-16 16:26:36.227594: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpaWdXIh.tmpYanJch.pyomo.lp
2014-07-16 16:26:36.241587: Solve completed - number of solutions=1
Sub-problem solve time statistics - Min: 0.00 Avg: 0.00 Max: 0.00 (seconds)
Slamming criteria are satisifed - accelerating convergence
Slamming variable=DevotedAcreage[CORN] at tree node=RootNode to value=96.8871743104; value=node average (anywhere)
Fixing variable=DevotedAcreage[CORN] at tree node=RootNode to value=96.8871743104; converged for 0 iterations
Number of discrete variables fixed=0 (total=0)
Number of continuous variables fixed=0 (total=3)
Convergence metric=      0.0776  First stage cost avg= 112915.6071  Max-Min= 3047.08
Cumulative run-time=0.47 seconds

Initiating PH iteration=5
WW PH Extension: Setting mipgap to 0.0312342, based on current value of the convergence metric
2014-07-16 16:26:36.255190: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpFJ1uEG.tmpTzYwkP.pyomo.lp
2014-07-16 16:26:36.270311: Solve completed - number of solutions=1
2014-07-16 16:26:36.283582: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpMe3YQL.tmpRXzX4d.pyomo.lp
2014-07-16 16:26:36.297564: Solve completed - number of solutions=1
2014-07-16 16:26:36.310033: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpPH5ujJ.tmpq1JizH.pyomo.lp
2014-07-16 16:26:36.324409: Solve completed - number of solutions=1
Sub-problem solve time statistics - Min: 0.00 Avg: 0.00 Max: 0.00 (seconds)
Number of discrete variables fixed=0 (total=0)
Number of continuous variables fixed=1 (total=3)
Convergence metric=      0.0609  First stage cost avg= 112895.6887  Max-Min= 5246.95
Cumulative run-time=0.55 seconds

Initiating PH iteration=6
WW PH Extension: Setting mipgap to 0.0247045, based on current value of the convergence metric
2014-07-16 16:26:36.337034: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpqmuRPx.tmpk_0ATk.pyomo.lp
2014-07-16 16:26:36.351285: Solve completed - number of solutions=1
2014-07-16 16:26:36.363723: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpoJkjfh.tmpu3QIln.pyomo.lp
2014-07-16 16:26:36.377776: Solve completed - number of solutions=1
2014-07-16 16:26:36.391351: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpF5jPE1.tmp_klNbx.pyomo.lp
2014-07-16 16:26:36.405216: Solve completed - number of solutions=1
Sub-problem solve time statistics - Min: 0.00 Avg: 0.00 Max: 0.00 (seconds)
Slamming criteria are satisifed - accelerating convergence
Slamming variable=DevotedAcreage[WHEAT] at tree node=RootNode to value=137.204959966; value=node average (anywhere)
Fixing variable=DevotedAcreage[WHEAT] at tree node=RootNode to value=137.204959966; converged for 0 iterations
Number of discrete variables fixed=0 (total=0)
Number of continuous variables fixed=1 (total=3)
Convergence metric=      0.0391  First stage cost avg= 112000.8391  Max-Min= 2624.80
Cumulative run-time=0.63 seconds

Initiating PH iteration=7
WW PH Extension: Setting mipgap to 0.0161915, based on current value of the convergence metric
2014-07-16 16:26:36.418017: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmp3zJBq1.tmpeZOjwl.pyomo.lp
2014-07-16 16:26:36.432827: Solve completed - number of solutions=1
2014-07-16 16:26:36.445425: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpYOQgez.tmpWU5xKA.pyomo.lp
2014-07-16 16:26:36.459742: Solve completed - number of solutions=1
2014-07-16 16:26:36.472467: Applying solver=cplex to solve problem=/var/folders/p5/4dj9d59x27v7_5_ddgn8r8zm0000gn/T/tmpGi03Ir.tmpW1SDfz.pyomo.lp
2014-07-16 16:26:36.488648: Solve completed - number of solutions=1
Sub-problem solve time statistics - Min: 0.00 Avg: 0.00 Max: 0.00 (seconds)
Number of discrete variables fixed=0 (total=0)
Number of continuous variables fixed=2 (total=3)
Convergence metric=      0.0000  First stage cost avg= 112000.8392  Max-Min=    0.00
Cumulative run-time=0.72 seconds
PH converged - convergence metric is below threshold=0.0001
Number of discrete variables fixed before final plugin calls=0 (total=0)
Number of continuous variables fixed before final plugin calls=2 (total=3)
WW PH extension: Fixing all discrete variables that are converged at termination
Total number of variables fixed at PH termination due to convergence=0
PH algorithm history written to file=ph_history.json
PH complete
Convergence history:
Iteration    Metric Value
     0             0.2540
     1             0.1259
     2             0.0816
     3             0.0796
     4             0.0776
     5             0.0609
     6             0.0391
     7             0.0000

***********************************************************************************************
>>>THE EXPECTED SUM OF THE STAGE COST VARIABLES=-107905.908751<<<
>>>***CAUTION***: Assumes full (or nearly so) convergence of scenario solutions at each node in the scenario tree - computed costs are invalid otherwise<<<
***********************************************************************************************
Final number of discrete variables fixed=0 (total=0)
Final number of continuous variables fixed=2 (total=3)
Final variable values:
   Stage: FirstStage
          (Scenarios: BelowAverageScenario  AverageScenario  AboveAverageScenario  )
      Variable: DevotedAcreage
         Index:        [CORN]	Values:       96.8872     96.8872     96.8872    Max-Min:        0.0000    Avg:       96.8872
         Index: [SUGAR_BEETS]	Values:      265.9079    265.9079    265.9079    Max-Min:        0.0000    Avg:      265.9079
         Index:       [WHEAT]	Values:      137.2050    137.2050    137.2050    Max-Min:        0.0000    Avg:      137.2050
      Cost Variable: FirstStageCost
         Tree Node: RootNode      (Scenarios:  BelowAverageScenario AverageScenario AboveAverageScenario )
         Values:   112000.8392 112000.8392 112000.8391    Max-Min:        0.0000   Avg:   112000.8392
Final costs:
Scenario Tree Costs
***CAUTION***: Assumes full (or nearly so) convergence of scenario solutions at each node in the scenario tree - computed costs are invalid otherwise
----------------------------------------------------
Tree Nodes:

	Name=AboveAverageNode
	Stage=SecondStage
	Parent=RootNode
	Conditional probability=0.3333
	Children:
		None
	Scenarios:
		AboveAverageScenario
	Expected cost of (sub)tree rooted at node=-272111.4913

	Name=AverageNode
	Stage=SecondStage
	Parent=RootNode
	Conditional probability=0.3333
	Children:
		None
	Scenarios:
		AverageScenario
	Expected cost of (sub)tree rooted at node=-223364.9995

	Name=BelowAverageNode
	Stage=SecondStage
	Parent=RootNode
	Conditional probability=0.3333
	Children:
		None
	Scenarios:
		BelowAverageScenario
	Expected cost of (sub)tree rooted at node=-164243.7528

	Name=RootNode
	Stage=FirstStage
	Parent=None
	Conditional probability=1.0000
	Children:
		AboveAverageNode
		AverageNode
		BelowAverageNode
	Scenarios:
		AboveAverageScenario
		AverageScenario
		BelowAverageScenario
	Expected cost of (sub)tree rooted at node=-107905.9088

----------------------------------------------------
Scenarios:

	Name=AboveAverageScenario
	Probability=0.3333
	Leaf Node=AboveAverageNode
	Tree node sequence:
		RootNode
		AboveAverageNode
	Stage=          FirstStage     Cost=112000.8391
	Stage=         SecondStage     Cost=-272111.4913
	Total scenario cost=-160110.6522

	Name=AverageScenario
	Probability=0.3333
	Leaf Node=AverageNode
	Tree node sequence:
		RootNode
		AverageNode
	Stage=          FirstStage     Cost=112000.8392
	Stage=         SecondStage     Cost=-223364.9995
	Total scenario cost=-111364.1604

	Name=BelowAverageScenario
	Probability=0.3333
	Leaf Node=BelowAverageNode
	Tree node sequence:
		RootNode
		BelowAverageNode
	Stage=          FirstStage     Cost=112000.8392
	Stage=         SecondStage     Cost=-164243.7528
	Total scenario cost=-52242.9136

----------------------------------------------------

Total PH execution time=0.72 seconds

Scenario tree solution written to file=ph_solution.json
Pushing fixed variable statuses to scenario instances
Number of discrete variables fixed prior to ef creation=0 (total=0)
Number of continuous variables fixed prior to ef creation=2 (total=3)
Creating extensive form for remainder problem
Time to construct extensive form instance=0.00 seconds
Queuing extensive form solve
Waiting for extensive form solve
Done with extensive form solve - loading results
Storing solution in scenario tree
Time to solve and load results for the extensive form=0.02 seconds

***********************************************************************************************
>>>THE EXPECTED SUM OF THE STAGE COST VARIABLES=-107905.908903<<<
***********************************************************************************************

Extensive form solution:
----------------------------------------------------
Tree Nodes:

	Name=AboveAverageNode
	Stage=SecondStage
	Parent=RootNode
	Variables: 
		QuantitySubQuotaSold[CORN]=108.793827517
		QuantitySubQuotaSold[SUGAR_BEETS]=6000.0
		QuantitySubQuotaSold[WHEAT]=211.614879899
		QuantitySuperQuotaSold[SUGAR_BEETS]=381.788777359

	Name=AverageNode
	Stage=SecondStage
	Parent=RootNode
	Variables: 
		QuantitySubQuotaSold[CORN]=50.6615229312
		QuantitySubQuotaSold[SUGAR_BEETS]=5318.15731447
		QuantitySubQuotaSold[WHEAT]=143.012399916

	Name=BelowAverageNode
	Stage=SecondStage
	Parent=RootNode
	Variables: 
		QuantityPurchased[CORN]=7.47078165504
		QuantitySubQuotaSold[SUGAR_BEETS]=4254.52585157
		QuantitySubQuotaSold[WHEAT]=74.4099199326

	Name=RootNode
	Stage=FirstStage
	Parent=None
	Variables: 
		DevotedAcreage[CORN]=96.8871743104
		DevotedAcreage[SUGAR_BEETS]=265.907865723
		DevotedAcreage[WHEAT]=137.204959966


Extensive form costs:
Scenario Tree Costs
***CAUTION***: Assumes full (or nearly so) convergence of scenario solutions at each node in the scenario tree - computed costs are invalid otherwise
----------------------------------------------------
Tree Nodes:

	Name=AboveAverageNode
	Stage=SecondStage
	Parent=RootNode
	Conditional probability=0.3333
	Children:
		None
	Scenarios:
		AboveAverageScenario
	Expected cost of (sub)tree rooted at node=-272111.4915

	Name=AverageNode
	Stage=SecondStage
	Parent=RootNode
	Conditional probability=0.3333
	Children:
		None
	Scenarios:
		AverageScenario
	Expected cost of (sub)tree rooted at node=-223364.9997

	Name=BelowAverageNode
	Stage=SecondStage
	Parent=RootNode
	Conditional probability=0.3333
	Children:
		None
	Scenarios:
		BelowAverageScenario
	Expected cost of (sub)tree rooted at node=-164243.7529

	Name=RootNode
	Stage=FirstStage
	Parent=None
	Conditional probability=1.0000
	Children:
		AboveAverageNode
		AverageNode
		BelowAverageNode
	Scenarios:
		AboveAverageScenario
		AverageScenario
		BelowAverageScenario
	Expected cost of (sub)tree rooted at node=-107905.9089

----------------------------------------------------
Scenarios:

	Name=AboveAverageScenario
	Probability=0.3333
	Leaf Node=AboveAverageNode
	Tree node sequence:
		RootNode
		AboveAverageNode
	Stage=          FirstStage     Cost=112000.8392
	Stage=         SecondStage     Cost=-272111.4915
	Total scenario cost=-160110.6523

	Name=AverageScenario
	Probability=0.3333
	Leaf Node=AverageNode
	Tree node sequence:
		RootNode
		AverageNode
	Stage=          FirstStage     Cost=112000.8392
	Stage=         SecondStage     Cost=-223364.9997
	Total scenario cost=-111364.1606

	Name=BelowAverageScenario
	Probability=0.3333
	Leaf Node=BelowAverageNode
	Tree node sequence:
		RootNode
		BelowAverageNode
	Stage=          FirstStage     Cost=112000.8392
	Stage=         SecondStage     Cost=-164243.7529
	Total scenario cost=-52242.9137

----------------------------------------------------
Scenario tree solution written to file=postphef_solution.json
Shutting down Pyro solver components
Dispatcher received request to shut down - initiating...

Total execution time=3.80 seconds
Name Server gracefully stopped.
Lost connection to dispatch server - shutting down...
